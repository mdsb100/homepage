
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title></title>
  <style>
    h1 {
      text-shadow: 0 1px #000, 0 -1px 0 #000, 1px 0 0 #000, -1px 0 0 #000;
      color: #fff;
      font: bold 90px/100% Arial;
      width: 100px;
      float: left;
      position: absolute;
      top: 15px;
    }
    .abc {
      -webkit-transition: background-color 1s linear 3s;
      background-color: #00f;
    }
    @-webkit-keyframes'wobble' {
      0% {
        background-color: red;
        -webkit-transform: rotate(0deg);
        left: 0%;
      }
      40% {
        background-color: darkblue;
        -webkit-transform: rotate(30deg);
        left: 95%
      }
      70% {
        background-color: yellow;
        -webkit-transform: rotate(-30deg);
        left: 50%
      }
      100% {
        background-color: red;
        -webkit-transform: rotate(0deg);
        left: 0%
      }
    }
  </style>
  <link href="../../../global/styles/reset.css" rel="stylesheet" type="text/css" />
  <script src="../../../amdquery/amdquery.js" type="text/javascript" amdquery="define:$;" amd="detectCR:1;"></script>
  <script type="text/javascript">
    //        $.require([
     //            "../../amdquery/html5/Storage.js",
     //            "../../amdquery/ui/swappable.js",
     //            "../../amdquery/html5/css3.js",
     //
     //        ]);
    $.require([
      "main/css",
      "main/position",
      "main/dom",
      "html5/css3",
      "ui/swappable",
      "html5/css3.transition.animate",
      "main/query"
    ], function() {
      $.ready(function() {
        //ff 10.0.1修复了一个Bug 关于js添加样式的问题"background-color"现在是可以的了
        //                alert(my2)
        //                alert(my3)
        //alert($.valueOf())
        var test1 = $("#test1");
        var test1_0 = test1.find("div").eq(0).css3({
          borderRadius: "150px",
          "background-color": "Green",
          "box-shadow": "4px 4px 2px rgba(0,0,0,.6)"
        });
        //            test1.css3({ transition: "background-color 1s linear" });
        //            test1.transition(["background-color 1s linear", "width 1s linear"]);
        //            var t = test1.transition("background-color")
        //                test1.addHandler("mouseover", function () {
        //                    test1.css({ backgroundColor: "#ff0" });
        //                });
        //                test1.addHandler("mouseout", function () {
        //                    test1.css({ backgroundColor: "#00f" });
        //                });

        //test1.addTransition(["height 1s linear"]);

        //test1.removeTransition(["width"]);

        //test1.replaceTransition("height", "height 5s linear");

        //                //事件这里优先测试
        test1.swappable({

        });
        test1.transition([{
          name: "backgroundColor",
          duration: "1s",
          "function": "linear",
          delay: "3s",
          events: {
            "swap.pause": "#0ff",
            "swap.stop": "#00ff00",
            "mousedown": "#ff0"
          }
          //, toggle: ["#ff0", "#00f"]
        }]);
        var title = $("h1") //.css3({animation:"wobble 5s linear infinite"})
        .css3({
          animationName: "wobble",
          animationDuration: "5s",
          animationTimingFunction: "linear",
          animationIterationCount: "infinite"
        });
        var test2 = $("#test2").initTransform3d();

        var obj = test2.find("div").eq(0).css({
          boxShadow: "4px 4px 2px rgba(0, 0, 0, 0.6)"
        })
        //.transform3d({ tx: 50, ty: 70, rx: 30, ry: 50 })
        //.transformOrigin({ x: "left", y: "top" })
        .transform([
          ["translate", "200px", "200px"],
          ["rotate", "30deg"],
          ["scale", "0.5", "0.5"]
        ])
        //.transform3d({ rz: 30, ry: 30, tx: 0, ty: 0, sx: 1, sy: 0.5 })
        //.setRotate3d({ rx: 30, ry: 30 })
        //.setScale({ sx: 0.5 })
        //                //3d来说firefox10还是比较傻的 skew也能解决问题
        //                var a = obj.css3Style("transform");
        //                var b = obj.css3("transform");
        //                var c = obj.transform();
        //                var d = obj.transform3d();

        var g = $.setTransformByCurrent(obj[0], [
          ["translate", "", "300px"]
        ]);
        //                var h = obj.transformOrigin();
        //                var i = obj.transform("translate");
        //                var j = obj.transform("translate3d");
        //                var k = obj.css3("transform3d");

        //                //            $.linearGradient(obj[0], {
        //                //                orientation: {
        //                //                    webkit: "left top,left bottom"
        //                //                    , normal: "left top"
        //                //                } || "left top"
        //                //                , colorStops: [{ stop: 0, color: "#8f2c00" }, { stop: 1, color: "#ff4f02"}]
        //                //            });
        $.radialGradient(obj[0], {
          radial: {
            webkit: [{
              x: 15,
              y: 15,
              r: 20
            }, {
              x: 50,
              y: 50,
              r: 60
            }],
            moz: {
              x: "50%",
              y: "50%"
            },
            o: [{
              x: "50%",
              y: "50%"
            }, {
              x: "30%",
              y: "30%"
            }],
            normal: {
              x: "50%",
              y: "50%"
            }
          } || {
            x: "50%",
            y: "50%"
          },
          colorStops: [{
            stop: 0,
            color: "#8f2c00"
          }, {
            stop: 1,
            color: "#ff4f02"
          }]
        });

        //                test2.find("div").eq(1).animateByTransition({ transform3d: { translateX: "+=100px", translateY: "+=100px"} }, { duration: 2000, easing: "linear" });
        //obj.css("backgroundImage", "-moz-radial-gradient(50% 50%,rgb(75,75,200) 30%,rgb(25,25,100) 50%,rgb(0,0,75))")
        //obj.css("backgroundImage", "-o-radial-gradient(50% 50%,70% 70%,rgb(75,75,200),rgb(25,25,100) 50%,rgb(0,0,75))")
        //$.sessionStorage.set("up", "123")
        //alert($.sessionStorage.get("up", "123"));
      });
    });

    $.require(["html5/Worker"], function(Worker) {
      new Worker().onMessage(function(e) {
        //alert(e.data);
      }).postMessage(function(a) {
        return this.name + a;
      }, {
        name: "abc"
      }, "d");
    });
     //        var worker = new window.Worker("../../amdquery/html5/_Worker.js");
     //        worker.addEventListener("message", function (e) {
     //            alert(e.data);
     //        }, false);
     //        var a = function () {
     //            return 1
     //        };

     //        worker.postMessage({ fun: a.toString() });
  </script>
</head>

<body style="overflow: auto">
  <div style="display: -webkit-box;-webkit-box-pack: end; -webkit-box-orient: horizontal; width:500px;height:200px;border:1px solid black">
    <div style="width:200px;height:100px;border:1px solid black;"></div>
    <div style="width:100px;height:100px;border:1px solid black;"></div>

  </div>
  <div style="width: 100%; height: 500px; border-bottom: 1px solid black; background-color: rgb(0, 0, 255);" id="test1" class="abc">
    <div style="width: 300px; height: 300px; background-color: Green; border-radius: 150px 150px 150px 150px;
            box-shadow: 4px 4px 2px rgba(0, 0, 0, 0.6);">
      <h1 style="-moz-animation-name: wobble; -moz-animation-duration: 5s; -moz-animation-timing-function: linear;
                -moz-animation-iteration-count: infinite;">
                hello word
            </h1>
    </div>
  </div>
  <div id="test2" style="width: 100%; height: 500px; border-bottom: 1px solid black;
        position: relative">
    <div style="width: 100px; height: 100px; background-color: Red; position: absolute;
            top: 100px; left: 200px;">
    </div>
    <div id="test3" style="width: 100px; height: 100px; position: relative; background: green;">
    </div>
  </div>
</body>

</html>
